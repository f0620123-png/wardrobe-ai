<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#fbf6ef" />
  <title>Wardrobe AI</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icon-192.png" />
  <link rel="apple-touch-icon" href="./icon-192.png" />

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <main class="app" id="app">
    <!-- Header -->
    <header class="header">
      <div class="brand">WARDROBE AI</div>
      <h1>今日穿搭</h1>
      <div class="sub">定位抓取體感溫度，推薦穿搭；也可自選單品合成示意圖。</div>

      <!-- Weather -->
      <section class="weatherBar" aria-label="天氣資訊">
        <div class="weatherLeft">
          <div class="weatherTemp" id="tempText">--°C</div>
          <div class="weatherFeels" id="feelsText">體感 --°C</div>
          <div class="weatherMeta" id="metaText">等待定位…</div>
        </div>
        <div class="weatherRight">
          <button class="btnSmall" id="btnLocate" type="button">定位/更新天氣</button>
        </div>
      </section>

      <section class="skeleton" id="weatherSkeleton" aria-hidden="true" style="display:none;">
        <div class="skLine" style="width:42%"></div>
        <div class="skLine" style="width:72%"></div>
        <div class="skLine" style="width:58%"></div>
      </section>

      <section class="hintBox" aria-label="穿搭建議">
        <div id="outfitHint">
          <div class="hintTitle">尚未取得天氣</div>
          <ul class="hintList">
            <li>點「定位/更新天氣」取得體感溫度與建議。</li>
          </ul>
        </div>
      </section>
    </header>

    <!-- Chips -->
    <nav class="chips" aria-label="分類篩選">
      <button class="chip on" type="button" data-filter="all">全部</button>
      <button class="chip" type="button" data-filter="top">上衣</button>
      <button class="chip" type="button" data-filter="bottom">下身</button>
      <button class="chip" type="button" data-filter="outer">外套</button>
      <button class="chip" type="button" data-filter="shoes">鞋子</button>
      <button class="chip" type="button" data-filter="accessory">配件</button>
    </nav>

    <!-- Grid -->
    <section aria-label="單品列表">
      <div class="grid" id="grid"></div>
      <div class="empty" id="empty" style="display:none;">
        尚無單品。點右下角「+」新增，或用「快速加入」先建立範例。
      </div>
    </section>
  </main>

  <!-- FAB -->
  <button class="fab" id="fab" type="button" aria-label="新增">+</button>

  <!-- Menu -->
  <div class="menu" id="menu" style="display:none;" role="menu" aria-label="新增選單">
    <button type="button" id="menuPickPhoto" role="menuitem">照片圖庫</button>
    <button type="button" id="menuTakePhoto" role="menuitem">拍照</button>
    <button type="button" id="menuQuickAdd" role="menuitem">快速加入</button>
    <button type="button" id="menuClose" role="menuitem" class="danger">關閉</button>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" style="display:none;" role="dialog" aria-modal="true" aria-label="編輯單品">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">新增單品</div>
        <button class="iconBtn" id="modalClose" type="button" aria-label="關閉">✕</button>
      </div>

      <div class="field">
        <div class="label">名稱（示意）</div>
        <input class="input" id="itemName" placeholder="例如：白色短袖 T / 牛仔外套" />
      </div>

      <div class="field">
        <div class="label">分類</div>
        <div class="catGrid" id="catGrid">
          <button class="catBtn on" type="button" data-cat="top">上衣</button>
          <button class="catBtn" type="button" data-cat="bottom">下身</button>
          <button class="catBtn" type="button" data-cat="outer">外套</button>
          <button class="catBtn" type="button" data-cat="shoes">鞋子</button>
          <button class="catBtn" type="button" data-cat="accessory">配件</button>
        </div>
      </div>

      <div class="field">
        <div class="label">備註</div>
        <textarea class="input" id="itemNote" rows="3" placeholder="示意：材質/顏色/版型/場合…"></textarea>
      </div>

      <button class="btnPrimary" id="modalSave" type="button">儲存</button>
      <button class="btnDanger" id="modalDelete" type="button">刪除</button>
    </div>
  </div>

  <!-- Bottom Nav -->
  <nav class="bottomNav" aria-label="底部導覽">
    <button class="on" type="button" data-tab="wardrobe">衣櫃</button>
    <button type="button" data-tab="outfit">穿搭</button>
    <button type="button" data-tab="settings">設定</button>
  </nav>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- Scripts -->
  <script defer src="./db.js"></script>
  <script defer src="./app.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(() => {});
    }
  </script>
</body>
</html>